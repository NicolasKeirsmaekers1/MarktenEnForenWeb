{"version":3,"sources":["./ClientApp/app/rapportage/rapportage-csv-export.component.ts","./ClientApp/app/rapportage/html/rapportage-csv-export.component.html","./ClientApp/app/rapportage/main.ts","./ClientApp/app/rapportage/rapportage.service.ts"],"names":[],"mappings":"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","file":"rapportage-main.js","sourcesContent":["import { Component } from \"@angular/core\"\r\nimport { RapportageService } from \"./rapportage.service\";\r\n\r\n@Component({\r\n    templateUrl: './html/rapportage-csv-export.component.html',\r\n    styles: [\".well .btn { margin-right: 20px;} a { text-decoration: none; color: inherit !important; } .well { cursor: pointer; }\"]\r\n})\r\n\r\nexport class CsvExportComponent {\r\n    pageTitle: string = 'Csv Export';\r\n\r\n    constructor(private service: RapportageService) {}\r\n\r\n    download($event) {\r\n        $event.preventDefault();\r\n        $event.stopPropagation();\r\n\r\n        var href = $event.target.closest(\"a\");\r\n        if (!href) return;\r\n\r\n        var type = href.getAttribute(\"data-type\");\r\n        if (!type) return;\r\n\r\n        this.service.download(type);\r\n    }\r\n}","module.exports = \"<div class=\\\"row\\\">\\r\\n    <div class=\\\"col-md-12\\\">\\r\\n        <mafo-panel selector=\\\"title\\\" [collapsable]=\\\"false\\\" [open]=\\\"true\\\">\\r\\n            <mafo-panel-heading>\\r\\n                <h3 class=\\\"row\\\">\\r\\n                    <span class=\\\"col-xs-12\\\" id=\\\"title-rapportage\\\">\\r\\n                        <span class=\\\"fa fa-file-text-o\\\"></span>&nbsp;\\r\\n                        Rapportage - CSV Export\\r\\n                    </span>\\r\\n                </h3>\\r\\n            </mafo-panel-heading>\\r\\n            <mafo-panel-body (click)=\\\"download($event)\\\">\\r\\n                <div class=\\\"row\\\">\\r\\n                    <div class=\\\"col-md-3\\\">\\r\\n                        <a data-type=\\\"MARKTOVERZICHT\\\" id=\\\"markten-overzicht-button\\\">\\r\\n                            <div class=\\\"well\\\">\\r\\n                                <span class=\\\"btn btn-success btn-xs btn-edit\\\">\\r\\n                                    <i class=\\\"fa fa-download\\\"></i>\\r\\n                                </span>\\r\\n                                Markten - overzicht\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-md-3\\\">\\r\\n                        <a data-type=\\\"AANVRAAGOVERZICHT\\\" id=\\\"aanvragen-overzicht-button\\\">\\r\\n                            <div class=\\\"well\\\">\\r\\n                                <span class=\\\"btn btn-success btn-xs btn-edit\\\">\\r\\n                                    <i class=\\\"fa fa-download\\\"></i>\\r\\n                                </span>\\r\\n                                Aanvragen - overzicht\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-md-3\\\">\\r\\n                        <a data-type=\\\"AANVRAAGWACHTLIJST\\\" id=\\\"aanvragen-overzicht-wachtlijsten-button\\\">\\r\\n                            <div class=\\\"well\\\">\\r\\n                                <span class=\\\"btn btn-success btn-xs btn-edit\\\">\\r\\n                                    <i class=\\\"fa fa-download\\\"></i>\\r\\n                                </span>\\r\\n                                Aanvragen - overzicht wachtlijsten (registratie)\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-md-3\\\">\\r\\n                        <a data-type=\\\"AANVRAAGWACHTLIJSTPERMARKT\\\" id=\\\"aanvragen-wachtlijst-per-markt-button\\\">\\r\\n                            <div class=\\\"well\\\">\\r\\n                                <span class=\\\"btn btn-success btn-xs btn-edit\\\">\\r\\n                                    <i class=\\\"fa fa-download\\\"></i>\\r\\n                                </span>\\r\\n                                Aanvragen - wachtlijst per markt (registratie)\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"row\\\">\\r\\n                    <div class=\\\"col-md-3\\\">\\r\\n                        <a data-type=\\\"AANVRAAGRESERVATIE\\\" id=\\\"aanvragen-reservaties-button\\\">\\r\\n                            <div class=\\\"well\\\">\\r\\n                                <span class=\\\"btn btn-success btn-xs btn-edit\\\">\\r\\n                                    <i class=\\\"fa fa-download\\\"></i>\\r\\n                                </span>\\r\\n                                Aanvragen - reservaties\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-md-3\\\">\\r\\n                        <a data-type=\\\"ABONNEMENTOVERZICHT\\\" id=\\\"abonnementen-overzicht-button\\\">\\r\\n                            <div class=\\\"well\\\">\\r\\n                                <span class=\\\"btn btn-success btn-xs btn-edit\\\">\\r\\n                                    <i class=\\\"fa fa-download\\\"></i>\\r\\n                                </span>\\r\\n                                Abonnementen - overzicht\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-md-3\\\">\\r\\n                        <a data-type=\\\"ABONNEMENTOPGESCHORT\\\"id=\\\"abonnementen-opgeschort-button\\\">\\r\\n                            <div class=\\\"well\\\">\\r\\n                                <span class=\\\"btn btn-success btn-xs btn-edit\\\">\\r\\n                                    <i class=\\\"fa fa-download\\\"></i>\\r\\n                                </span>\\r\\n                                Abonnementen - opgeschort\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-md-3\\\">\\r\\n                        <a data-type=\\\"ABONNEMENTGESCHORST\\\" id=\\\"abonnenementen-geschorst-button\\\">\\r\\n                            <div class=\\\"well\\\">\\r\\n                                <span class=\\\"btn btn-success btn-xs btn-edit\\\">\\r\\n                                    <i class=\\\"fa fa-download\\\"></i>\\r\\n                                </span>\\r\\n                                Abonnementen - geschorst\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"row\\\">\\r\\n                    <div class=\\\"col-md-3\\\">\\r\\n                        <a data-type=\\\"ABONNEMENTOVERDRACHT\\\" id=\\\"abonnementen-overdracht-button\\\">\\r\\n                            <div class=\\\"well\\\">\\r\\n                                <span class=\\\"btn btn-success btn-xs btn-edit\\\">\\r\\n                                    <i class=\\\"fa fa-download\\\"></i>\\r\\n                                </span>\\r\\n                                Abonnementen - overdracht\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-md-3\\\">\\r\\n                        <a data-type=\\\"ABONNEMENTINTREKKING\\\" id=\\\"abonnementen-intrekking-button\\\">\\r\\n                            <div class=\\\"well\\\">\\r\\n                                <span class=\\\"btn btn-success btn-xs btn-edit\\\">\\r\\n                                    <i class=\\\"fa fa-download\\\"></i>\\r\\n                                </span>\\r\\n                                Abonnementen - intrekking\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-md-3\\\">\\r\\n                        <a data-type=\\\"ABONNEMENTOPZEGGING\\\" id=\\\"abonnementen-opzegging-button\\\">\\r\\n                            <div class=\\\"well\\\">\\r\\n                                <span class=\\\"btn btn-success btn-xs btn-edit\\\">\\r\\n                                    <i class=\\\"fa fa-download\\\"></i>\\r\\n                                </span>\\r\\n                                Abonnementen - opzegging\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                    <div class=\\\"col-md-3\\\">\\r\\n                        <a data-type=\\\"KLANTOVERZICHT\\\" id=\\\"klanten-overzicht-button\\\">\\r\\n                            <div class=\\\"well\\\">\\r\\n                                <span class=\\\"btn btn-success btn-xs btn-edit\\\">\\r\\n                                    <i class=\\\"fa fa-download\\\"></i>\\r\\n                                </span>\\r\\n                                Klanten - overzicht\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"row\\\">\\r\\n                    <div class=\\\"col-md-3\\\">\\r\\n                        <a data-type=\\\"HISTORIEK\\\" id=\\\"historiek-button\\\">\\r\\n                            <div class=\\\"well\\\">\\r\\n                                <span class=\\\"btn btn-success btn-xs btn-edit\\\">\\r\\n                                    <i class=\\\"fa fa-download\\\"></i>\\r\\n                                </span>\\r\\n                                Historiek\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </mafo-panel-body>\\r\\n        </mafo-panel>\\r\\n    </div>\\r\\n</div>\"","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from \"@angular/core\";\r\nimport { RouterModule } from \"@angular/router\";\r\nimport { SharedModule } from \"../shared/shared.module\";\r\nimport { CsvExportComponent }   from \"./rapportage-csv-export.component\";\r\nimport { RapportageService } from \"./rapportage.service\";\r\nimport { AuthGuard, Privilege } from \"../auth\";\r\n\r\n\r\n@NgModule({\r\n    imports: [SharedModule,\r\n        RouterModule.forChild([\r\n            {\r\n                path: \"csv-export\",\r\n                component: CsvExportComponent,\r\n                data: {\r\n                    privileges: [Privilege.Rapportage.Get]\r\n                }\r\n            }])\r\n    ],\r\n    declarations: [CsvExportComponent],\r\n    providers: [RapportageService],\r\n    schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\nexport class RapportageModule { }","\r\nimport { map, catchError, tap } from 'rxjs/operators';\r\nimport { Injectable } from '@angular/core';\r\nimport { AppSettings } from '../app.settings';\r\nimport { SlimLoadingBarService } from \"ng2-slim-loading-bar\";\r\nimport { Observable } from 'rxjs';\r\nimport \"rxjs/add/operator/do\";\r\nimport \"rxjs/add/operator/catch\";\r\nimport \"rxjs/add/operator/map\";\r\nimport \"rxjs/add/observable/throw\";\r\nimport { BaseService } from '../core';\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport * as FileSaver from \"file-saver\";\r\n\r\n@Injectable()\r\nexport class RapportageService extends BaseService {\r\n    private url = AppSettings.API_ENDPOINT + \"reports/\";\r\n\r\n    constructor(protected http: HttpClient, protected loader: SlimLoadingBarService) {\r\n        super(http, loader);\r\n    }\r\n    download(type: string): void {\r\n        this.loader.start();\r\n        this.http.get(this.url + type, { headers: this.csvHeaders, observe: 'response', responseType: 'text' }).pipe(\r\n            tap(x => this.loader.complete()),\r\n            catchError(this.handleError),\r\n            map((resp: any) => {\r\n                var blob = new Blob([resp.body], { type: \"text/csv\" });\r\n                var name = resp.headers.get(\"content-disposition\");\r\n                FileSaver.saveAs(blob, name.substr(name.lastIndexOf(\"'\") + 1));\r\n            }))\r\n            .subscribe();\r\n    }\r\n}"],"sourceRoot":"webpack:///"}